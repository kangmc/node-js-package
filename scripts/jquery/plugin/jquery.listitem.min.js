/*! tru.package 2014-10-15 */
!function(a){a.fn.listItem=function(b){function c(){i.find(h.layer).hide()}function d(){return a(this).closest(h.item).find(h.layer).hide(),!1}function e(a){var b="A, BUTTON, INPUT, SELECT, TEXTAREA",c=a.find(b);return c.get(c.length-1)}{var f={duration:150},g=a.extend(!0,f,b),h={item:".item",item_detail:"a[name=item_detail]",item_option:"select[name=item_option]",item_quantity:"input[name=item_quantity]",item_no:"input[name=item_no]",btn_item_detail:"a[name=btn_item_detail]",btn_item_zzim:"a[name=btn_item_zzim]",btn_item_cart:"a[name=btn_item_cart]",btn_option_cart:"a[name=btn_option_cart]",btn_option_close:"a[name=btn_option_close]",layer:".layer-option",clsActive:"active",clsSelected:"selected"},i=this,j=this.find(h.item);j.find(h.layer)}j.on("click",h.btn_item_detail,function(){return a.isFunction(g.detail)?g.detail(a(this)):location.href=a(h.item_detail).attr("href"),!1}),j.on("click",h.btn_item_zzim,function(){return a.isFunction(g.zzim)&&g.zzim(a(this)),!1}),j.on("click",h.btn_item_cart,function(){var b=a(this),d=b.closest(h.item);return d.find(h.layer).length?("none"==d.find(h.layer).css("display")&&c(),d.find(h.layer).fadeToggle(g.duration),!1):(a.isFunction(g.cart)&&g.cart(b),!1)}),j.on("click",h.btn_option_cart,function(){return a.isFunction(g.cart)&&g.cart(a(this)),!1}),j.find(h.btn_option_close).on("click",d),j.on("click",h.item_no,function(){var b=a(this),c=b.closest(h.item);b.is(":checked")?c.addClass(h.clsSelected):c.removeClass(h.clsSelected)}),a.isFunction(a.fn.nAdjust)&&j.find(h.item_quantity).nAdjust({readonly:!1}),j.each(function(b,c){var d=a(c);lastTarget=e(d),d.on("mouseenter focusin",function(){return a(this).addClass(h.clsActive),!1}).on("mouseleave focusout",function(b){return"mouseleave"==b.type&&a(this).removeClass(h.clsActive).find(h.layer).fadeOut(g.duration),"focusout"==b.type&&b.target.name==lastTarget.name&&a(this).closest(h.item).removeClass(h.clsActive).find(h.layer).fadeOut(g.duration),!1})})}}(jQuery,window,document);